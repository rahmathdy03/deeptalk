<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DeepTalk Night ‚ú®</title>

<style>
* { box-sizing: border-box; }

body {
margin: 0;
height: 100vh;
font-family: 'Poppins', sans-serif;
color: #fff;
overflow: hidden;
}

/* ===== OPENING ===== */
#opening {
position: fixed;
inset: 0;
background:
linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
url('bgawal.jpg') center/cover no-repeat;
display: flex;
justify-content: center;
align-items: center;
text-align: center;
z-index: 10;
}

#opening button {
margin-top: 24px;
padding: 12px 28px;
border: none;
border-radius: 30px;
font-size: 1rem;
background: #fff;
color: #333;
cursor: pointer;
}

/* ===== MAIN ===== */
#main {
display: none;
height: 100vh;
background:
linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
url('bg.jpg') center/cover no-repeat;
display: flex;
justify-content: center;
align-items: center;
}

.container {
text-align: center;
padding: 20px;
}

/* CARD */
.card {
width: 300px;
height: 190px;
perspective: 1200px;
margin: 24px auto;
cursor: pointer;
}

.card-inner {
width: 100%;
height: 100%;
position: relative;
transform-style: preserve-3d;
transition: transform 0.8s;
}

.card.flip .card-inner {
transform: rotateY(180deg);
}

.card-face {
position: absolute;
width: 100%;
height: 100%;
border-radius: 18px;
backface-visibility: hidden;
display: flex;
align-items: center;
justify-content: center;
padding: 18px;
box-shadow: 0 15px 35px rgba(0,0,0,0.4);
}

.front {
background: linear-gradient(135deg, #ffafbd, #ffc3a0);
color: #333;
font-weight: 600;
}

.back {
background: linear-gradient(135deg, #667eea, #764ba2);
transform: rotateY(180deg);
}

/* BUTTON */
button {
padding: 10px 22px;
border: none;
border-radius: 25px;
background: #fff;
color: #333;
cursor: pointer;
margin-top: 10px;
}

/* MESSAGE */
#message {
margin-top: 16px;
font-size: 1rem;
color: #ffd36e;
}

/* WISHLIST */
#wishlist {
display: none;
}

textarea {
width: 90%;
max-width: 320px;
height: 80px;
border-radius: 12px;
border: none;
padding: 10px;
margin: 10px 0;
}

/* CAMERA */
#cameraScreen, #resultScreen {
display: none;
text-align: center;
padding: 20px;
}

video {
width: 90%;
max-width: 320px;
border-radius: 18px;
}

/* RESULT */
img {
width: 90%;
max-width: 360px;
border-radius: 20px;
box-shadow: 0 10px 30px rgba(0,0,0,0.4);
}
</style>
</head>

<body>

<!-- OPENING -->
<div id="opening">
  <div>
    <h1>Malam ini cuma tentang kita</h1>
    <button onclick="start()">Tap to Start</button>
  </div>
</div>

<!-- MAIN -->
<div id="main">
<div class="container">
<h1>üåô DeepTalk Night</h1>

<div class="card" onclick="flipCard()">
  <div class="card-inner">
    <div class="card-face front">üé¥ Tap untuk membuka</div>
    <div class="card-face back" id="question">...</div>
  </div>
</div>

<button onclick="nextCard()">Kartu Berikutnya</button>
<div id="message"></div>

<!-- WISHLIST -->
<div id="wishlist">
<h2>Wishlist 2026 ü§ç</h2>
<textarea id="rahmat" placeholder="Rahmat ingin..."></textarea>
<textarea id="finka" placeholder="Finka ingin..."></textarea>
<br>
<button onclick="startCamera()">Aamiin ü§ç</button>
</div>

</div>
</div>

<!-- CAMERA -->
<div id="cameraScreen">
<h2>üì∏ Satu Foto untuk Mengingat Doa Ini</h2>
<video id="video" autoplay playsinline></video><br><br>
<button onclick="takePhoto()">Ambil Foto</button>
</div>

<!-- RESULT -->
<canvas id="canvas" style="display:none"></canvas>
<div id="resultScreen">
<h2>Wishlist Kita 2026</h2>
<img id="finalImg"><br><br>
<a id="download" download="wishlist-2026.png">
<button>Simpan Kenangan</button>
</a>
</div>

<script>
const questions = [
"Momen apa dari kita yang paling ingin kamu ulang di tahun depan?",
"Hal kecil apa dariku yang paling kamu hargai?",
"Kapan kamu merasa paling tenang sama aku?",
"Apa hal tentang aku yang baru kamu sadari?",
"Apa yang paling kamu harapkan dariku saat capek?",
"Apa kekuatan terbesar hubungan kita?",
"Apa yang ingin kita perbaiki di tahun baru?",
"Pernah takut kehilangan aku?",
"Apa arti komitmen buat kamu sekarang?",
"Satu harapan jujur untuk kita tahun depan?"
];

let index = 0;
let stream;

function start() {
document.getElementById("opening").style.display = "none";
document.getElementById("main").style.display = "flex";
}

function flipCard() {
document.querySelector('.card').classList.toggle('flip');
}

function nextCard() {
document.querySelector('.card').classList.remove('flip');
document.getElementById("question").innerText = questions[index];

if (index === 2) document.getElementById("message").innerText =
"ü§ç Pegangan tangan 10 detik";
else if (index === 6) document.getElementById("message").innerText =
"üòä Patpat kepala 3 kali";
else document.getElementById("message").innerText = "";

index++;

if (index === questions.length) {
setTimeout(() => {
document.getElementById("wishlist").style.display = "block";
}, 800);
}
}

function startCamera() {
document.getElementById("main").style.display = "none";
document.getElementById("cameraScreen").style.display = "block";

navigator.mediaDevices.getUserMedia({
video: { facingMode: "user" }
}).then(s => {
stream = s;
video.srcObject = s;
});
}

function takePhoto() {
const c = document.getElementById("canvas");
const ctx = c.getContext("2d");
c.width = 1080;
c.height = 1350;

ctx.fillStyle = "#fff";
ctx.fillRect(0,0,c.width,c.height);
ctx.drawImage(video,190,80,700,700);

stream.getTracks().forEach(t=>t.stop());

ctx.fillStyle = "#333";
ctx.font = "bold 40px Poppins";
ctx.textAlign = "center";
ctx.fillText("Wishlist Kita 2026", 540, 830);

ctx.font = "28px Poppins";
ctx.textAlign = "left";
ctx.fillText("Rahmat:",140,900);
ctx.fillText(document.getElementById("rahmat").value,140,940);
ctx.fillText("Finka:",140,1020);
ctx.fillText(document.getElementById("finka").value,140,1060);

const img = c.toDataURL();
document.getElementById("finalImg").src = img;
document.getElementById("download").href = img;

document.getElementById("cameraScreen").style.display = "none";
document.getElementById("resultScreen").style.display = "block";
}
</script>

</body>
</html>
